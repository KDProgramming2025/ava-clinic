generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Service {
  id              String        @id @default(cuid())
  title           String
  subtitle        String?
  slug            String        @unique
  description     String
  image           String?
  priceRange      String?
  duration        String?
  recovery        String?
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  durationMinutes Int?
  titleEn         String?
  titleFa         String?
  subtitleEn      String?
  subtitleFa      String?
  descriptionEn   String?
  descriptionFa   String?
  benefits        Benefit[]
  bookings        Booking[]
  faq             Faq[]
  processSteps    ProcessStep[]
}

model Benefit {
  id        String  @id @default(cuid())
  text      String
  serviceId String
  service   Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
}

model ProcessStep {
  id          String  @id @default(cuid())
  stepNumber  Int
  title       String?
  description String
  serviceId   String
  service     Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@index([serviceId, stepNumber])
}

model Faq {
  id        String  @id @default(cuid())
  question  String
  answer    String
  serviceId String
  service   Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
}

model Testimonial {
  id        String   @id @default(cuid())
  name      String
  text      String
  rating    Int
  image     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  nameEn    String?
  nameFa    String?
  textEn    String?
  textFa    String?
}

model TeamMember {
  id        String    @id @default(cuid())
  name      String
  role      String
  bio       String?
  image     String?
  active    Boolean   @default(true)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  nameEn    String?
  nameFa    String?
  roleEn    String?
  roleFa    String?
  bioEn     String?
  bioFa     String?
  articles  Article[] @relation("ArticleAuthor")
}

model Category {
  id        String    @id @default(cuid())
  name      String
  slug      String    @unique
  color     String?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  articles  Article[]
}

model Tag {
  id        String    @id @default(cuid())
  name      String
  slug      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  articles  Article[] @relation("ArticleTags")
}

model Article {
  id              String        @id @default(cuid())
  title           String
  slug            String        @unique
  excerpt         String?
  body            String?
  image           String?
  readTimeMinutes Int?
  status          ArticleStatus @default(DRAFT)
  featured        Boolean       @default(false)
  publishedAt     DateTime?
  categoryId      String?
  authorId        String?
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  description     String?
  descriptionEn   String?
  descriptionFa   String?
  subtitle        String?
  subtitleEn      String?
  subtitleFa      String?
  titleEn         String?
  titleFa         String?
  contentUrl      String?
  author          TeamMember?   @relation("ArticleAuthor", fields: [authorId], references: [id])
  category        Category?     @relation(fields: [categoryId], references: [id])
  tags            Tag[]         @relation("ArticleTags")

  @@index([categoryId])
  @@index([status])
  @@index([featured])
}

model NavigationItem {
  id      String  @id @default(cuid())
  label   String
  path    String
  order   Int     @default(0)
  visible Boolean @default(true)
  labelEn String?
  labelFa String?
}

model FooterLink {
  id      String  @id @default(cuid())
  label   String
  url     String
  group   String?
  labelEn String?
  labelFa String?
  groupEn String?
  groupFa String?
}

model Settings {
  id                     Int     @id @default(1)
  siteTitle              String?
  metaDescription        String?
  ogImage                String?
  primaryColor           String?
  secondaryColor         String?
  languagesJson          Json?
  contactAutoReply       String?
  emailConfirmTemplate   String?
  emailReminderTemplate  String?
  logoUrl                String?
  perPageSeo             Json?
  siteTitleEn            String?
  siteTitleFa            String?
  metaDescriptionEn      String?
  metaDescriptionFa      String?
  servicesHeroSubtitleEn String?
  servicesHeroSubtitleFa String?
  servicesHeroTitleEn    String?
  servicesHeroTitleFa    String?
  servicesCtaTitleEn     String?
  servicesCtaTitleFa     String?
  servicesCtaBodyEn      String?
  servicesCtaBodyFa      String?
  servicesCtaPrimaryEn   String?
  servicesCtaPrimaryFa   String?
  servicesCtaSecondaryEn String?
  servicesCtaSecondaryFa String?
  instagramAccessToken   String?
  instagramUserId        String?
  instagramUsername      String?
  instagramAccountType   String?
  instagramConnectedAt   DateTime?
  instagramTokenExpiresAt DateTime?
  instagramFeedCache     Json?
  instagramFeedCachedAt  DateTime?
  instagramLastError     String?
  snapWidgetEmbedUrl     String?
}

model HomeHero {
  id                  Int     @id @default(1)
  title               String?
  subtitle            String?
  description         String?
  ctaPrimaryLabel     String?
  ctaSecondaryLabel   String?
  imageUrl            String?
  titleEn             String?
  titleFa             String?
  subtitleEn          String?
  subtitleFa          String?
  descriptionEn       String?
  descriptionFa       String?
  ctaPrimaryLabelEn   String?
  ctaPrimaryLabelFa   String?
  ctaSecondaryLabelEn String?
  ctaSecondaryLabelFa String?
}

model HomeStat {
  id      String  @id @default(cuid())
  label   String
  value   Int
  icon    String?
  labelEn String?
  labelFa String?
}

model HomeFeature {
  id            String  @id @default(cuid())
  title         String
  description   String?
  icon          String?
  titleEn       String?
  titleFa       String?
  descriptionEn String?
  descriptionFa String?
}

model HomeCTA {
  id            Int     @id @default(1)
  heading       String?
  subheading    String?
  buttonLabel   String?
  headingEn     String?
  headingFa     String?
  subheadingEn  String?
  subheadingFa  String?
  buttonLabelEn String?
  buttonLabelFa String?
}

model Translation {
  key       String   @id
  data      Json
  updatedAt DateTime @default(now()) @updatedAt
}

model AboutTimeline {
  id            String  @id @default(cuid())
  year          Int
  title         String
  description   String?
  titleEn       String?
  titleFa       String?
  descriptionEn String?
  descriptionFa String?
}

model AboutValue {
  id            String  @id @default(cuid())
  title         String
  description   String?
  icon          String?
  titleEn       String?
  titleFa       String?
  descriptionEn String?
  descriptionFa String?
}

model AboutSkill {
  id     String  @id @default(cuid())
  name   String
  level  Int
  nameEn String?
  nameFa String?
}

model AboutMission {
  id                Int     @id @default(1)
  heading           String?
  paragraph         String?
  imageHeroUrl      String?
  imageSecondaryUrl String?
  headingEn         String?
  headingFa         String?
  paragraphEn       String?
  paragraphFa       String?
}

model AboutMissionBullet {
  id     String  @id @default(cuid())
  text   String
  textEn String?
  textFa String?
}

model AboutStat {
  id      String  @id @default(cuid())
  label   String
  labelEn String?
  labelFa String?
  value   String
  icon    String?
}

model ContactInfoBlock {
  id      String             @id @default(cuid())
  type    ContactInfoType
  title   String
  titleEn String?
  titleFa String?
  values  ContactInfoValue[]
}

model ContactInfoValue {
  id      String           @id @default(cuid())
  value   String
  blockId String
  valueEn String?
  valueFa String?
  block   ContactInfoBlock @relation(fields: [blockId], references: [id], onDelete: Cascade)
}

model ContactFaq {
  id         String  @id @default(cuid())
  question   String
  answer     String
  questionEn String?
  questionFa String?
  answerEn   String?
  answerFa   String?
}

model SocialLink {
  id         String  @id @default(cuid())
  platform   String
  url        String
  icon       String?
  platformEn String?
  platformFa String?
}

model QuickAction {
  id      String          @id @default(cuid())
  label   String
  type    QuickActionType
  target  String
  labelEn String?
  labelFa String?
}

model ContactMap {
  id          Int     @id
  latitude    Float?
  longitude   Float?
  zoom        Int?    @default(15)
  markerLabel String?
}

model Newsletter {
  id          Int     @id @default(1)
  headline    String?
  description String?
  buttonLabel String?
}

model TrendingTopic {
  id    String @id @default(cuid())
  text  String
  order Int    @default(0)
}

model Client {
  id        String       @id @default(cuid())
  name      String
  email     String?
  phone     String?
  joinDate  DateTime     @default(now())
  lastVisit DateTime?
  status    ClientStatus @default(ACTIVE)
  notes     String?
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  bookings  Booking[]
}

model Booking {
  id         String        @id @default(cuid())
  clientId   String
  serviceId  String?
  startTime  DateTime
  endTime    DateTime?
  status     BookingStatus @default(PENDING)
  notes      String?
  priceCents Int?
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt
  client     Client        @relation(fields: [clientId], references: [id], onDelete: Cascade)
  service    Service?      @relation(fields: [serviceId], references: [id])

  @@index([clientId])
  @@index([serviceId])
  @@index([status, startTime])
}

model Message {
  id         String        @id @default(cuid())
  fromName   String
  email      String?
  phone      String?
  subject    String?
  body       String
  receivedAt DateTime      @default(now())
  status     MessageStatus @default(NEW)
  starred    Boolean       @default(false)
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt

  @@index([status, receivedAt])
}

model VideoCategory {
  id        String   @id @default(cuid())
  name      String
  slug      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  videos    Video[]
}

model Video {
  id              String         @id @default(cuid())
  title           String
  description     String?
  thumbnail       String?
  durationSeconds Int?
  views           Int            @default(0)
  status          VideoStatus    @default(DRAFT)
  categoryId      String?
  sourceUrl       String?
  caption         String?
  media           Json?
  takenAt         DateTime?
  authorUsername  String?
  authorFullName  String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  slug            String?        @unique
  sortOrder       Int            @default(0)
  category        VideoCategory? @relation(fields: [categoryId], references: [id])

  @@index([categoryId])
  @@index([status])
}

model Media {
  id        String   @id @default(cuid())
  url       String
  alt       String?
  type      String?
  labels    Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model BookingSettings {
  id                     Int     @id @default(1)
  timeSlots              Json?
  blackoutDates          Json?
  disclaimer             String?
  disclaimerEn           String?
  disclaimerFa           String?
  bufferMinutes          Int?
  defaultDurationMinutes Int?    @default(60)
  businessHours          Json?
}

model AdminUser {
  id           String    @id @default(cuid())
  email        String    @unique
  name         String?
  role         AdminRole @default(EDITOR)
  passwordHash String
  active       Boolean   @default(true)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  username     String?   @unique
}

model BookingInfo {
  id          String  @id @default(cuid())
  title       String
  description String?
  icon        String?
  order       Int     @default(0)
}

enum ArticleStatus {
  DRAFT
  PUBLISHED
}

enum VideoStatus {
  DRAFT
  PUBLISHED
}

enum ContactInfoType {
  phone
  email
  address
  hours
}

enum QuickActionType {
  call
  email
  chat
  custom
}

enum BookingStatus {
  PENDING
  CONFIRMED
  COMPLETED
  CANCELLED
}

enum ClientStatus {
  ACTIVE
  INACTIVE
}

enum MessageStatus {
  NEW
  READ
  REPLIED
  ARCHIVED
}

enum AdminRole {
  SUPERADMIN
  ADMIN
  EDITOR
  VIEWER
}
